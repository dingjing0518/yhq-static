(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2f3db3e"],{1857:function(e,t,a){"use strict";var o=a("3098"),i=a.n(o);i.a},3098:function(e,t,a){},"454f":function(e,t,a){a("46a7");var o=a("584a").Object;e.exports=function(e,t,a){return o.defineProperty(e,t,a)}},"46a7":function(e,t,a){var o=a("63b6");o(o.S+o.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"85f2":function(e,t,a){e.exports=a("454f")},c38e:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"carManager"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 优惠券管理\n      ")])],1)],1),a("div",{staticClass:"container"},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center","class-name":"table"}}),a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号","class-name":"table"}}),e._e(),a("el-table-column",{attrs:{prop:"names",label:"优惠券类型","class-name":"table"}}),a("el-table-column",{attrs:{prop:"couponName",label:"减免券名称","class-name":"table"}}),a("el-table-column",{attrs:{prop:"couponStarttime",label:"开始时间","class-name":"table"}}),a("el-table-column",{attrs:{prop:"couponEndtime",label:"结束时间","class-name":"table"}}),a("el-table-column",{attrs:{prop:"couponCount",label:"减免券总数量","class-name":"table"}}),a("el-table-column",{attrs:{prop:"couponDataA",label:"减免券剩余量","class-name":"table"}}),a("el-table-column",{attrs:{prop:"jcgReliefAlltime",label:"减免总时长","class-name":"table"}}),a("el-table-column",{attrs:{prop:"jcgReliefRemaintime",label:"减免剩余时长","class-name":"table"}}),a("el-table-column",{attrs:{prop:"jcgReliefAllmoney",label:"减免总金额","class-name":"table"}}),a("el-table-column",{attrs:{prop:"jcgReliefRemainmoney",label:"减免剩余金额","class-name":"table"}}),a("el-table-column",{attrs:{prop:"couponParkingName",label:"停车场","class-name":"table"}}),a("el-table-column",{attrs:{prop:"couponAreaName",label:"区域","class-name":"table"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center","class-name":"table"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("生成")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"添加",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"优惠券名称",prop:"jcgName "}},[a("el-input",{model:{value:e.addForm.jcgName,callback:function(t){e.$set(e.addForm,"jcgName",t)},expression:"addForm.jcgName "}})],1),a("el-form-item",{attrs:{label:"类型",prop:"jcgType"}},[a("el-input",{model:{value:e.addForm.jcgType,callback:function(t){e.$set(e.addForm,"jcgType",t)},expression:"addForm.jcgType"}})],1),a("el-form-item",{attrs:{label:"数量",prop:"jcgCount"}},[a("el-input",{model:{value:e.addForm.jcgCount,callback:function(t){e.$set(e.addForm,"jcgCount",t)},expression:"addForm.jcgCount"}})],1),a("el-form-item",{attrs:{label:"开始日期",prop:"jcgStartdata"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.addForm.jcgStartdata,callback:function(t){e.$set(e.addForm,"jcgStartdata",t)},expression:"addForm.jcgStartdata"}})],1),a("el-form-item",{attrs:{label:"结束日期",prop:"jcgEnddata"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.addForm.jcgEnddata,callback:function(t){e.$set(e.addForm,"jcgEnddata",t)},expression:"addForm.jcgEnddata"}})],1),a("el-form-item",{attrs:{label:"开始时间",prop:"jcgStarttime"}},[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"18:30:00 - 20:30:00"},placeholder:"任意时间点"},model:{value:e.addForm.jcgStarttime,callback:function(t){e.$set(e.addForm,"jcgStarttime",t)},expression:"addForm.jcgStarttime"}})],1),a("el-form-item",{attrs:{label:"结束时间",prop:"jcgEndtime"}},[a("el-time-picker",{attrs:{"picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"任意时间点"},model:{value:e.addForm.jcgEndtime,callback:function(t){e.$set(e.addForm,"jcgEndtime",t)},expression:"addForm.jcgEndtime"}})],1),a("el-form-item",{attrs:{label:"代理商",prop:"jcgAgentName"}},[a("el-select",{attrs:{placeholder:"代理商"},model:{value:e.addForm.jcgAgentName,callback:function(t){e.$set(e.addForm,"jcgAgentName",t)},expression:"addForm.jcgAgentName"}},e._l(e.agent,function(e){return a("el-option",{key:e.jcgAgentName,attrs:{label:e.jcgAgentName,value:e.jcgAgentName}})}),1)],1),a("el-form-item",{attrs:{label:"停车场",prop:"jcgParkingName"}},[a("el-select",{attrs:{placeholder:"停车场"},model:{value:e.addForm.jcgParkingName,callback:function(t){e.$set(e.addForm,"jcgParkingName",t)},expression:"addForm.jcgParkingName"}},e._l(e.parking,function(e){return a("el-option",{key:e.jcgParkingName,attrs:{label:e.jcgParkingName,value:e.jcgParkingName}})}),1)],1),a("el-form-item",{attrs:{label:"区域",prop:"jcgAreaName"}},[a("el-select",{attrs:{placeholder:"区域"},model:{value:e.addForm.jcgAreaName,callback:function(t){e.$set(e.addForm,"jcgAreaName",t)},expression:"addForm.jcgAreaName"}},e._l(e.area,function(e){return a("el-option",{key:e.jcgAreaName,attrs:{label:e.jcgAreaName,value:e.jcgAreaName}})}),1)],1),a("el-form-item",{attrs:{label:"商户",prop:"jcgBcName"}},[a("el-select",{attrs:{placeholder:"商户"},model:{value:e.addForm.jcgBcName,callback:function(t){e.$set(e.addForm,"jcgBcName",t)},expression:"addForm.jcgBcName"}},e._l(e.bc,function(e){return a("el-option",{key:e.jcgBcName,attrs:{label:e.jcgBcName,value:e.jcgBcName}})}),1)],1),a("el-form-item",{attrs:{label:"优惠券",prop:"jcgBcName"}},[a("el-select",{attrs:{placeholder:"优惠券"},model:{value:e.addForm.jcgCouponName,callback:function(t){e.$set(e.addForm,"jcgCouponName",t)},expression:"addForm.jcgCouponName"}},e._l(e.bc,function(e){return a("el-option",{key:e.jcgCouponName,attrs:{label:e.jcgCouponName,value:e.jcgCouponName}})}),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAdd}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"生成优惠券",visible:e.editVisibleCoupon,width:"30%"},on:{"update:visible":function(t){e.editVisibleCoupon=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"优惠券名称",prop:"jcgName"}},[a("el-input",{attrs:{placeholder:"请输入优惠券名称,此项由用户自定义，以便在优惠券生成模块区分。"},model:{value:e.editForm.jcgName,callback:function(t){e.$set(e.editForm,"jcgName",t)},expression:"editForm.jcgName"}})],1),a("el-form-item",{attrs:{label:"优惠券数量",prop:"jcgCount"}},[a("el-input",{attrs:{placeholder:"请输入需要生成的优惠券数量，数量需要小于已有的优惠券数量"},model:{value:e.editForm.jcgCount,callback:function(t){e.$set(e.editForm,"jcgCount",t)},expression:"editForm.jcgCount"}})],1),""!=e.addserver?a("span",{staticClass:"span_addserver"},[e._v(e._s(e.addserver))]):e._e(),a("el-form-item",{attrs:{label:"优惠券类型",prop:"jcgType"}},[a("el-select",{attrs:{disabled:e.flagNum},on:{change:e.chooseCoupon},model:{value:e.editForm.jcgType,callback:function(t){e.$set(e.editForm,"jcgType",t)},expression:"editForm.jcgType"}},e._l(e.couponType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"减免时长",prop:"time"}},[a("el-input",{attrs:{placeholder:"减免时长（小时）",disabled:e.flagTime},model:{value:e.editForm.jcgReliefTime,callback:function(t){e.$set(e.editForm,"jcgReliefTime",t)},expression:"editForm.jcgReliefTime"}})],1),a("el-form-item",{attrs:{label:"减免金额",prop:"money"}},[a("el-input",{attrs:{placeholder:"减免金额（元）",disabled:e.flagMoney},model:{value:e.editForm.jcgReliefMoney,callback:function(t){e.$set(e.editForm,"jcgReliefMoney",t)},expression:"editForm.jcgReliefMoney"}})],1),a("el-form-item",{attrs:{label:"开始日期",prop:"jcgStartdata"}},[a("el-date-picker",{attrs:{type:"datetime","picker-options":{selectableRange:"00:00:00 - 00:00:00"},placeholder:"生效时间，默认无失效日期"},model:{value:e.editForm.jcgStartdata,callback:function(t){e.$set(e.editForm,"jcgStartdata",t)},expression:"editForm.jcgStartdata"}})],1),a("el-form-item",{attrs:{label:"结束日期",prop:"jcgEnddata"}},[a("el-date-picker",{attrs:{type:"datetime","picker-options":{selectableRange:"23:59:59 - 23:59:59"},placeholder:"生效时间，默认无失效日期"},model:{value:e.editForm.jcgEnddata,callback:function(t){e.$set(e.editForm,"jcgEnddata",t)},expression:"editForm.jcgEnddata"}})],1),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"开始时间"},on:{change:e.addTime},model:{value:e.editForm.jcgStarttime,callback:function(t){e.$set(e.editForm,"jcgStarttime",t)},expression:"editForm.jcgStarttime"}})],1),a("el-form-item",{attrs:{label:"结束时间"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"结束时间"},model:{value:e.editForm.jcgEndtime,callback:function(t){e.$set(e.editForm,"jcgEndtime",t)},expression:"editForm.jcgEndtime"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisibleCoupon=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)},i=[],l=(a("c5f6"),a("7f7f"),a("85f2")),r=a.n(l);function n(e,t,a){return t in e?r()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a("a15e");var s={name:"carManager",data:function(){var e,t=this,a=function(e,a,o){var i=new Date(t.editForm.jcgStartdata),l=i.getTime(),r=new Date(t.editForm.jcgEnddata),n=r.getTime();console.log(l),console.log(n),l>n?(o(new Error("结束时间不能早与开始时间")),console.log("12")):(o(),console.log("13"))};return e={coupon:[],bc:[],agent:[],area:[],parking:[],tableData:[],cur_page:1,pagesize:20,totalRecords:0,addserver:"",totalPages:0,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,editVisibleCoupon:!1,addVisible:!1,delVisible:!1,residuenumber:"",nameS:"",rowtime:"",money:"",NumberS:"",Alltime:"",AllMoney:"",addForm:{jcgId:"",jcgName:"",jcgCount:"",jcgStartdata:"",jcgEnddata:"",jcgStarttime:"",jcgEndtime:"",jcgBcName:"",jcgAgentName:"",jcgParkingName:"",jcgAreaName:"",jcgCouponName:"",couponId:""},editForm:{jcgId:"",jcgName:"",jcgCount:"",jcgStartdata:"",jcgEnddata:"",jcgStarttime:"",jcgEndtime:"",jcgBcName:"",jcgAgentName:"",jcgParkingName:"",jcgAreaName:"",jcgCouponName:"",jcgType:"",jcgReliefTime:"",jcgReliefMoney:"",jcgReliefAllmoney:"",jcgReliefAlltime:"",couponId:"",bcId:""},editFormRules:{jcgName:[{required:!0,message:"请输入优惠券名称",trigger:"blur"},{min:1,max:20,message:"名称应在20字节以内",trigger:"blur"}],jcgCount:[{required:!0,message:"请输入优惠券数量",trigger:"blur"},{pattern:/^[0-9]+$/,message:"请输入正确的数量"}],jcgEnddata:[{required:!0,message:"请输入结束时间",trigger:"blur"},{validator:a,trigger:"blur"}]},options:[],value:"",carFormRules:{},idx:-1,id:-1,flagTime:!0,flagNum:!0,flagMoney:!0},n(e,"flagNum",!0),n(e,"couponType",[{value:0,label:"全免券"},{value:1,label:"减免时长"},{value:2,label:"减免金额"},{value:3,label:"当天有效全免券"}]),e},created:function(){this.getData(),this.getAgent(),this.getArea(),this.getParking()},computed:{data:function(){var e=this;return this.tableData.filter(function(t){for(var a=!1,o=0;o<e.del_list.length;o++)if(t.name===e.del_list[o].name){a=!0;break}if(!a&&t.address.indexOf(e.select_cate)>-1&&(t.name.indexOf(e.select_word)>-1||t.address.indexOf(e.select_word)>-1))return t})}},methods:{addTime:function(e){console.log(this.editForm.jcgStarttime)},dateChangebirthdayC:function(e){console.log(e),this.addForm.couponStarttime=e,this.editForm.couponStarttime=e},dateChangebirthdayD:function(e){console.log(e),this.editForm.couponEndtime=e},dateFormatterexpirationTime:function(e,t){var a=e.expirationTime;if(a){a=new Date(a);var o=a.getFullYear()+"-",i=a.getMonth()+1+"-",l=a.getDate();return o+i+l}return""},dateFormatter:function(e,t){var a=e.joinTime;if(a){a=new Date(a);var o=a.getFullYear()+"-",i=a.getMonth()+1+"-",l=a.getDate();return o+i+l}return""},handleSizeChange:function(e){this.pagesize=e,this.getData()},handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this;localStorage.getItem("bcId"),this.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/selectCouponAll?bcId="+localStorage.getItem("bcId")+"&parkId="+localStorage.getItem("parkingId"),method:"get"}).then(function(t){if(t.status<=200){e.tableData=t.data,console.log(t.data);for(var a=0;a<e.tableData.length;a++)e.tableData[a]["names"]="";for(var o=0;o<e.tableData.length;o++)0==e.tableData[o].couponType?e.tableData[o].names="全免劵":1==e.tableData[o].couponType?e.tableData[o].names="减免时长":2==e.tableData[o].couponType?e.tableData[o].names="减免金额":3==e.tableData[o].couponType&&(e.tableData[o].names="当天有效全免劵")}}).catch(function(t){e.$message.error("查询失败: "+t),console.log(t)})},getAgent:function(){this.agent.length=0;var e=this;this.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/selectAllAgent",method:"post",data:{}}).then(function(t){for(var a=0;a<t.data.agentNameData.length;a++)e.agent.push({jcgAgentName:t.data.agentNameData[a].username})}).catch(function(t){e.$message.error("查询失败: "+t)})},getArea:function(){this.area.length=0;var e=this;this.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/selectAreaNameAll",method:"get",data:{}}).then(function(t){for(var a=0;a<t.data.areaNameData.length;a++)e.area.push({jcgAreaName:t.data.areaNameData[a].areaName})}).catch(function(t){e.$message.error("查询失败: "+t)})},getParking:function(){this.parking.length=0;var e=this;this.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/selectAllParkingName",method:"post",data:{}}).then(function(t){for(var a=0;a<t.data.parkingNameData.length;a++)e.parking.push({jcgParkingName:t.data.parkingNameData[a].jpName})}).catch(function(t){e.$message.error("查询失败: "+t)})},getCoupon:function(){this.area.length=0;var e=this;this.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/selectCouponAll",method:"post",data:{}}).then(function(t){for(var a=0;a<t.data.BusinessNameData.length;a++)e.coupon.push({jcoCouponName:t.data.BusinessNameData[a].bcName});console.log(t.data)}).catch(function(t){e.$message.error("查询失败: "+t)})},formatter:function(e,t){return e.address},filterTag:function(e,t){return t.tag===e},handleEdit:function(e,t){var a;console.log(t),this.rowtime=t,this.nameS=t.names,this.NumberS=t.couponDataA,this.Alltime=t.jcgReliefRemaintime,this.AllMoney=t.jcgReliefRemainmoney,"1"==t.couponType?(this.flagTime=!1,this.flagTime=!1,this.flagMoney=!0):"2"==t.couponType?(this.flagTime=!0,this.flagMoney=!1):"3"==t.couponType?(this.flagTime=!0,this.flagMoney=!0):"0"==t.couponType&&(this.flagTime=!0,this.flagMoney=!0),console.log(this.editForm),this.residuenumber=t.couponDataA,this.idx=e,this.id=t.couponId,console.log(this.residuenumber),this.editVisibleCoupon=!0,this.editForm=(a={jcgName:"",jcgType:"",jcgCount:t.jcgCount,couponId:t.couponId,jcgBcName:t.couponBcName,jcgAgentName:t.couponAgentName,jcgParkingName:t.couponParkingName,jcgAreaName:t.couponAreaName,jcgCouponName:t.couponName,jcgStartdata:""},n(a,"jcgType",Number(t.couponType)),n(a,"jcgReliefTime",""),n(a,"jcgReliefMoney",""),n(a,"jcgReliefAllmoney",""),n(a,"jcgReliefAlltime",""),n(a,"jcgStarttime",new Date(2016,9,10,0,0)),n(a,"jcgEndtime",new Date(2016,9,10,23,29)),a);var o=new Date,i=(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours()+":");i=i<10?"0"+i:i;var l=o.getMinutes()+":";l=l<10?"0"+l:l;var r=o.getSeconds();r=r<10?"0"+r:r},chooseCoupon:function(e){console.log(e),this.editForm.jcgType=e,"减免时长"==this.editForm.jcgType?(this.flagTime=!1,this.flagMoney=!0):"减免金额"==this.editForm.jcgType?(this.flagMoney=!1,this.flagTime=!0):(this.flagTime=!0,this.flagMoney=!0)},saveEdit:function(){var e=this,t=new Date(this.editForm.jcgStartdata),a=t.getFullYear()+"-",o=t.getMonth()+1+"-",i=t.getDate(),l=t.getHours()+":";l=l<10?"0"+l:l;var r=t.getMinutes()+":";r=r<10?"0"+r:r;var n=t.getSeconds();if(n=n<10?"0"+n:n,this.editForm.jcgStartdata=a+o+i+" "+l+r+n,console.log(this.editForm.jcgEnddata),void 0==this.editForm.jcgEnddata)this.editForm.jcgEnddata="0",console.log(this.editForm.jcgEnddata);else{var s=new Date(this.editForm.jcgEnddata),c=s.getFullYear()+"-",d=s.getMonth()+1+"-",m=s.getDate(),g=s.getHours()+":";g=g<10?"0"+g:g;var u=s.getMinutes()+":";u=u<10?"0"+u:u;var p=s.getSeconds();p=p<10?"0"+p:p,this.editForm.jcgEnddata=c+d+m+" "+g+u+p,console.log("5555555",this.editForm.jcgEnddata)}"Mon Oct 10 2016 00:00:00 GMT+0800 (中国标准时间)"==this.editForm.jcgStarttime&&(this.editForm.jcgStarttime="00:00:00"),"Mon Oct 10 2016 23:29:00 GMT+0800 (中国标准时间)"==this.editForm.jcgEndtime&&(this.editForm.jcgEndtime="23:29:00"),console.log(this.editForm,"55555555555555555555555555555");var h=this;switch(this.editForm.jcgType){case"全免券":this.editForm.jcgType=0;break;case"减免时长":this.editForm.jcgType=1;break;case"减免金额":this.editForm.jcgType=2;break;case"当天有效全免券":this.editForm.jcgType=3;break}console.log(this.editForm.jcgType,"panduan "),1==this.editForm.jcgType?(this.editForm.jcgReliefAlltime=Number(this.editForm.jcgCount)*Number(this.editForm.jcgReliefTime),this.editForm.jcgReliefAllmoney="",console.log(this.editForm.jcgReliefAlltime)):2==this.editForm.jcgType?(this.editForm.jcgReliefAllmoney=Number(this.editForm.jcgCount)*Number(this.editForm.jcgReliefMoney),this.editForm.jcgReliefAlltime=""):3==this.editForm.jcgType?(this.editForm.jcgReliefAlltime="",this.editForm.jcgReliefAllmoney=""):0==this.editForm.jcgType&&(this.editForm.jcgReliefAlltime="",this.editForm.jcgReliefAllmoney=""),console.log(this.editForm.jcgEnddata),this.editForm.bcId=localStorage.getItem("bcId");var f=this.editForm;console.log(f.jcgEnddata),console.log(this.rowtime);var b=new Date(this.rowtime.couponEndtime).getTime(),j=new Date(this.rowtime.couponStarttime).getTime(),F=new Date(f.jcgEnddata).getTime(),v=new Date(f.jcgStartdata).getTime();console.log(b),console.log(j),console.log(F),console.log(v),this.$refs.editForm.validate(function(t){if(t)if(b>=F&&j<=v)if(console.log(e.AllMoney),"减免金额"==e.nameS){console.log("1213");var a=Number(e.editForm.jcgCount)*Number(e.editForm.jcgReliefMoney);console.log(a),a>Number(e.AllMoney)?e.addserver="总金额不能大于剩余金额":e.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/updateCouponCount",method:"post",data:f}).then(function(e){if(e.status<=200){if(h.editVisibleCoupon=!1,h.$message.success("生成优惠券成功"),h.addserver="",console.log("123",e),h.tableData[h.idx].id===h.id)h.$set(h.tableData,h.idx,h.editForm);else for(var t=0;t<h.tableData.length;t++)if(h.tableData[t].id===h.id)return void h.$set(h.tableData,t,h.editForm);h.getData()}}).catch(function(e){h.$message.error("修改失败！"),console.log(e)})}else if("减免时长"==e.nameS){var o=Number(e.editForm.jcgCount)*Number(e.editForm.jcgReliefTime);console.log(o),console.log(e.Alltime),o>Number(e.Alltime)?e.addserver="总时长不能大于剩余时长":e.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/updateCouponCount",method:"post",data:f}).then(function(e){if(e.status<=200){if(h.editVisibleCoupon=!1,h.$message.success("生成优惠券成功"),h.addserver="",console.log("123",e),h.tableData[h.idx].id===h.id)h.$set(h.tableData,h.idx,h.editForm);else for(var t=0;t<h.tableData.length;t++)if(h.tableData[t].id===h.id)return void h.$set(h.tableData,t,h.editForm);h.getData()}}).catch(function(e){h.$message.error("修改失败！"),console.log(e)})}else Number(e.editForm.jcgCount)>Number(e.NumberS)?e.addserver="数量不能大于减免券剩余量":e.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/updateCouponCount",method:"post",data:f}).then(function(e){if(e.status<=200){if(h.editVisibleCoupon=!1,h.$message.success("生成优惠券成功"),h.addserver="",console.log("123",e),h.tableData[h.idx].id===h.id)h.$set(h.tableData,h.idx,h.editForm);else for(var t=0;t<h.tableData.length;t++)if(h.tableData[t].id===h.id)return void h.$set(h.tableData,t,h.editForm);h.getData()}}).catch(function(e){h.$message.error("修改失败！"),console.log(e)});else h.$message.error("输入的时间在有效时间内");else h.$message.error("格式不正确")})},handleDelete:function(e,t){this.idx=e,this.id=t.couponId,console.log(this.id),this.delVisible=!0},delAll:function(){var e=this.multipleSelection.length,t="";this.del_list=this.del_list.concat(this.multipleSelection);for(var a=0;a<e;a++)t+=this.multipleSelection[a].name+" ";this.$message.success("删除了"+t),this.multipleSelection=[]},handleSelectionChange:function(e){this.multipleSelection=e},saveAdd:function(){var e=this;if(console.log(this.addForm.passWord,this.addForm.passwordsure),this.addForm.passWord==this.addForm.passwordsure){var t=this;t.addForm.rolename=t.value,NaN==t.jcgEndtime&&(t.jcgEndtime="");var a=this.addForm;this.$refs.addForm.validate(function(o){o?e.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/insert",method:"post",data:a}).then(function(e){e.status<=200&&(1==e.data.code?t.$message.error("用户名已存在"):(t.addVisible=!1,t.$message.success("添加成功"),t.getData()))}).catch(function(e){t.$message.error("添加失败！"),console.log(e)}):t.$message.success("格式不正确")})}else alert("两次密码不一致")},deleteRow:function(){var e=this;this.$axios({url:"http://yun.jinshipark.com:81/JinshiCouponGenerate/deleteByPrimaryKey?id="+e.id,method:"post",data:{id:e.id}}).then(function(t){if(t.status<=200)if(e.$message.success("删除成功"),e.delVisible=!1,e.tableData[e.idx].id===e.id)e.tableData.splice(e.idx,1);else for(var a=0;a<e.tableData.length;a++)if(e.tableData[a].id===e.id)return void e.tableData.splice(a,1)}).catch(function(t){e.$message.success("删除失败！"),console.log(t)})}}},c=s,d=(a("fbcb"),a("1857"),a("2877")),m=Object(d["a"])(c,o,i,!1,null,"31f4f9ad",null);t["default"]=m.exports},fae9:function(e,t,a){},fbcb:function(e,t,a){"use strict";var o=a("fae9"),i=a.n(o);i.a}}]);