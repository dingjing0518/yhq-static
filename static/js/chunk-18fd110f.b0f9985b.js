(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18fd110f"],{1721:function(e,a,t){},"5a80":function(e,a,t){"use strict";var l=t("1721"),n=t.n(l);n.a},bfa8:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"inOutRecord"},[t("div",{staticClass:"crumbs"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[t("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 历史纪录\n      ")])],1)],1),t("div",{staticClass:"container"},[t("div",{staticClass:"handle-box"},[t("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:e.select_word,callback:function(a){e.select_word=a},expression:"select_word"}}),t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.valueA,callback:function(a){e.valueA=a},expression:"valueA"}}),t("el-date-picker",{staticStyle:{margin:"0px 10px 0px 10px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.valueB,callback:function(a){e.valueB=a},expression:"valueB"}}),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.lpPaymentType,callback:function(a){e.lpPaymentType=a},expression:"lpPaymentType"}},e._l(e.type,function(e){return t("el-option",{key:e.value,staticStyle:{"margin-left":"30px"},attrs:{label:e.label,value:e.value}})}),1),t("el-select",{staticStyle:{margin:"0px 10px 0px 10px"},attrs:{placeholder:"公司查询"},model:{value:e.getCompany,callback:function(a){e.getCompany=a},expression:"getCompany"}},e._l(e.companyData,function(e,a){return t("el-option",{key:a,attrs:{label:e.jsName,value:e.jsName}})}),1),t("el-select",{attrs:{placeholder:"区域查询"},model:{value:e.getArea,callback:function(a){e.getArea=a},expression:"getArea"}},e._l(e.areas,function(e){return t("el-option",{key:e.id,attrs:{label:e.areaName,value:e.areaName}})}),1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.onsearch(1)}}},[e._v("查询")]),t("el-button",{staticClass:"sousuo",attrs:{type:"primary"},on:{click:e.outup}},[e._v("导出数据")]),t("el-button",{staticClass:"sousuo",staticStyle:{"margin-left":"0px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.refresh}},[e._v("刷新")])],1),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.inOutTableData,border:""}},[t("el-table-column",{attrs:{type:"index",width:"55",align:"center",label:"序号","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpLincensePlateIdCar",label:"车牌号",width:"120","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpInboundTime",formatter:e.dateFormatter,label:"入场时间",width:"210","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpDepartureTime",formatter:e.dateFormatterexpirationTime,label:"出场时间",width:"210","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpCarType",label:"区域","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpLincenseType",label:"车牌类型","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpParkingOften",label:"停车时长","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpParkingRealCost",label:"实收费用","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpParkingCost",label:"应收费用","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpOrderId",align:"center",label:"订单编号","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpOrderState",label:"订单状态","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpPaymentType",label:"出场类型","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpInboundCname",label:"入场口名","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpDepartureCname",label:"出场口名","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpPaymentType",label:"付费类型","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpLgName",align:"center",label:"车牌组","class-name":"table"}}),t("el-table-column",{attrs:{prop:"lpLgTypeName",align:"center",label:"进场类型","class-name":"table"}})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.cur_page,"page-size":e.pagesize,total:e.totalRecords,"page-sizes":[50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},n=[],s=(t("386d"),t("f386"),t("7f7f"),{name:"inOutRecord",data:function(){return{all:{plate:"未查询"},options:[{value:"4",label:"本年"},{value:"3",label:"本月"},{value:"2",label:"本周"}],type:[{value:"无",label:"无"},{value:"手动删除",label:"手动删除"},{value:"扫码支付出场",label:"扫码支付出场"},{value:"人工收费出场",label:"人工收费出场"},{value:"无效卡出场",label:"无效卡出场"},{value:"免费时长内出场",label:"免费时长内出场"},{value:"月租车出场",label:"月租车出场"},{value:"异常数据",label:"异常数据"},{value:"预付款出场",label:"预付款出场"},{value:"优惠券出场",label:"优惠券出场"},{value:"手动清除记录",label:"手动清除记录"}],value:"",valueA:"",valueB:"",inOutTableData:[],lpPaymentType:"全部",cur_page:1,pagesize:50,totalRecords:0,totalPages:0,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,editVisible:!1,addVisible:!1,delVisible:!1,idx:-1,id:-1,datetimers:"",datetimess:"",numberer:0,condition:0,small:"",getCompany:[],companyData:[],getArea:[],areas:[]}},created:function(){this.getData(),this.handleArea(),this.handleCompany()},computed:{data:function(){var e=this;return this.tableData.filter(function(a){for(var t=!1,l=0;l<e.del_list.length;l++)if(a.name===e.del_list[l].name){t=!0;break}if(!t&&a.address.indexOf(e.select_cate)>-1&&(a.name.indexOf(e.select_word)>-1||a.address.indexOf(e.select_word)>-1))return a})}},methods:{refresh:function(){this.getData(),this.select_word="",this.lpPaymentType="全部"},outup:function(){var e="全部"==this.lpPaymentType?"":this.lpPaymentType,a=this.select_word;console.log("关键字：",a);var t="无"==this.getCompany?"":this.getCompany,l="无"==this.getArea?"":this.getArea,n=new Date(this.valueA),s=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),r=s,i=new Date(this.valueB),o=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),c=o;window.location.href="lincensePlateHistory/batchExportPlateHistory?parkId="+localStorage.getItem("parkId")+"&keyWord="+a+"&companyName="+t+"&areaName="+l+"&startTime="+r+"&endTime="+c+"&lpPaymentType="+e},handleArea:function(){var e=this;e.getArea=[],this.$axios({url:"http://58.210.33.107:8080/carmanager_war/jinshiArea/selectAreaNameAll?parkId="+localStorage.getItem("parkId"),method:"get"}).then(function(a){if(console.log("区域返回值：",a),e.areas=[],e.areas.push({id:null,areaName:"无"}),a.status<=200)for(var t=0;t<a.data.areaNameData.length;t++)e.areas.push({id:a.data.areaNameData[t].id,areaName:a.data.areaNameData[t].areaName})}).catch(function(e){console.log(e)})},handleCompany:function(){var e=this;e.getCompany=[],console.log(e.getCompany,"选择的值"),this.$axios({url:"http://58.210.33.107:8080/carmanager_war/jinshiCompany/selectname",method:"post",data:{parkId:String(localStorage.getItem("parkId"))}}).then(function(a){if(a.status<=200){e.companyData=[],e.companyData.push({id:null,jsName:"无"});for(var t=0;t<a.data.companyData.length;t++)e.companyData.push({jsName:a.data.companyData[t].jsName,id:a.data.companyData[t].id})}}).catch(function(e){console.log(e)})},onsearch:function(e){1==e&&(this.cur_page=1),this.numberer=2;var a=this,t=window.localStorage.getItem("parkId");if(this.itemsr=t,null==this.valueA)this.datetimers=null;else{var l=new Date(this.valueA);this.datetimers=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate()}if(null==a.valueB)this.datetimess=null;else{var n=new Date(a.valueB);this.datetimess=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()}"全部"==this.lpPaymentType||"无"==this.lpPaymentType?this.small=null:this.small=this.lpPaymentType,this.$axios({url:"http://58.210.33.107:8080/carmanager_war/lincensePlateHistory/selectLincenseAllByTime",method:"post",data:{keyWord:a.select_word,pageNum:a.cur_page,pageSize:a.pagesize,startTime:a.datetimers,endTime:a.datetimess,parkId:localStorage.getItem("parkId"),lpPaymentType:a.small,jsName:"无"==this.getCompany?"":this.getCompany,areaName:"无"==this.getArea?"":this.getArea}}).then(function(e){if(e.status<=200){console.log("查询返回数据",e);for(var t=e.data.lincenseData,l=0;l<t.length;l++)t[l].lpParkingRealCost&&(t[l].lpParkingRealCost=parseInt(t[l].lpParkingRealCost)+"元"),t[l].lpParkingOften&&(t[l].lpParkingOften=t[l].lpParkingOften+"分钟"),t[l].lpParkingCost&&(t[l].lpParkingCost=parseInt(t[l].lpParkingCost)+"元");for(var n=0;n<e.data.lincenseData.length;n++)""==e.data.lincenseData[n].lpInboundCname&&(e.data.lincenseData[n].lpInboundCname=""),""==e.data.lincenseData[n].lpDepartureCname&&(e.data.lincenseData[n].lpDepartureCname="");for(l=0;l<e.data.lincenseData.length;l++)1==e.data.lincenseData[l].lpLincenseType?e.data.lincenseData[l].lpLincenseType="汽油车":11==e.data.lincenseData[l].lpLincenseType?e.data.lincenseData[l].lpLincenseType="能源车":2==e.data.lincenseData[l].lpLincenseType?e.data.lincenseData[l].lpLincenseType="蓝牌能源车":3==e.data.lincenseData[l].lpLincenseType&&(e.data.lincenseData[l].lpLincenseType="黄牌车");a.inOutTableData=e.data.lincenseData,a.totalRecords=e.data.lincenseTotalRecords}}).catch(function(e){a.$message.error("查询失败: "+e),console.log(e)})},getnew:function(){console.log(this.value);var e=this;this.$axios({url:"http://58.210.33.107:8080/carmanager_war/lincensePlateHistory/selectLincenseOutRocordByCalendar",method:"post",data:{type:e.value,pageNum:e.cur_page,pageSize:e.pagesize,parkId:localStorage.getItem("parkId")}}).then(function(a){console.log("getnew的数据",a.data.lincenseData),e.inOutTableData=a.data.lincenseData,e.totalRecords=a.data.lincenseCountList[0],e.all.plate=a.data.lincenseCountList[0]}).catch(function(e){console.log(e)})},dateFormatterexpirationTime:function(e,a){var t=e.lpDepartureTime;if(t){t=new Date(t);var l=t.getFullYear()+"-",n=t.getMonth()+1+"-",s=t.getDate(),r=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),o=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return l+n+s+" "+r+":"+i+":"+o}return""},dateFormatter:function(e,a){var t=e.lpInboundTime;if(t){t=new Date(t);var l=t.getFullYear()+"-",n=t.getMonth()+1+"-",s=t.getDate(),r=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),o=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return l+n+s+" "+r+":"+i+":"+o}return""},handleSizeChange:function(e){0==this.numberer?(this.pagesize=e,this.getData(1)):1==this.numberer?(this.pagesize=e,this.search(1)):(this.pagesize=e,this.onsearch(1))},handleCurrentChange:function(e){0==this.numberer?(this.cur_page=e,this.getData()):1==this.numberer?(this.cur_page=e,this.search(2)):(this.cur_page=e,this.onsearch(2))},getData:function(e){var a=this;1==e&&(this.cur_page=1),this.numberer=0;var t=new Date,l=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();n<10&&(n="0"+n),s<10&&(s="0"+s);var r=l+"-"+n+"-"+s;this.valueA=r,this.valueB=r,this.$axios({url:"http://58.210.33.107:8080/carmanager_war/lincensePlateHistory/selectLincenseAll",method:"post",data:{pageNum:a.cur_page,pageSize:a.pagesize,parkId:localStorage.getItem("parkId")}}).then(function(e){if(e.status<=200){a.inOutTableData=[];for(var t=e.data.lincenseData,l=0;l<t.length;l++)t[l].lpParkingRealCost&&(t[l].lpParkingRealCost=parseInt(t[l].lpParkingRealCost)+"元"),t[l].lpParkingOften&&(t[l].lpParkingOften=t[l].lpParkingOften+"分钟"),t[l].lpParkingCost&&(t[l].lpParkingCost=parseInt(t[l].lpParkingCost)+"元");for(var n=0;n<e.data.lincenseData.length;n++)""==e.data.lincenseData[n].lpInboundCname&&(e.data.lincenseData[n].lpInboundCname=""),""==e.data.lincenseData[n].lpDepartureCname&&(e.data.lincenseData[n].lpDepartureCname="");a.inOutTableData=e.data.lincenseData,a.totalRecords=e.data.lincenseTotalRecords,console.log(e.data,"123")}}).catch(function(e){a.$message.error("查询失败: "+e),console.log(e)})},formatter:function(e,a){return e.address},filterTag:function(e,a){return a.tag===e}}}),r=s,i=(t("5a80"),t("2877")),o=Object(i["a"])(r,l,n,!1,null,"1863beb5",null);a["default"]=o.exports}}]);