(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a62b702"],{"241e3":function(e,a,t){"use strict";var r=t("dfe5"),l=t.n(r);l.a},"4c9c":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"yardManager"},[t("div",{staticClass:"crumbs"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[t("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 区域管理\n      ")])],1)],1),t("div",{staticClass:"container"},[t("div",{staticClass:"handle-box"},[t("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:e.select_word,callback:function(a){e.select_word=a},expression:"select_word"}}),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.search(1)}}},[e._v("搜索")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(a){e.addVisible=!0}}},[e._v("添加")]),t("el-button",{staticClass:"sousuo",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.refresh}},[e._v("刷新")])],1),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"100",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{type:"index",width:"100",align:"center",label:"序号","class-name":"table"}}),t("el-table-column",{attrs:{prop:"areaName",label:"区域名称",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{prop:"areaNumber",label:"区域编号",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{prop:"parkingCount",label:"车位数",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{prop:"payMonth",label:"包月",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{prop:"payQuarter",label:"包季",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{prop:"payYear",label:"包年",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{prop:"temporaryParkingCount",label:"临时车位数",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{prop:"allowNegativeCar",label:"允许负车位数",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{label:"操作",width:"200",align:"center","class-name":"table"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(a.$index,a.row)}}},[e._v("编辑")]),t("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.cur_page,"page-size":e.pagesize,total:e.totalRecords,"page-sizes":[5,10,20,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(a){e.editVisible=a}}},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"110px",rules:e.carFormRulesA}},[t("el-form-item",{attrs:{label:"区域名称",prop:"areaName"}},[t("el-input",{attrs:{placeholder:"请输入区域名称"},model:{value:e.editForm.areaName,callback:function(a){e.$set(e.editForm,"areaName",a)},expression:"editForm.areaName"}})],1),t("el-form-item",{attrs:{label:"区域编号",prop:"areaNumber"}},[t("el-input",{attrs:{placeholder:"请输入区域编号"},model:{value:e.editForm.areaNumber,callback:function(a){e.$set(e.editForm,"areaNumber",a)},expression:"editForm.areaNumber"}})],1),t("el-form-item",{attrs:{label:"车位数",prop:"parkingCount"}},[t("el-input",{attrs:{placeholder:"请输入车位数"},model:{value:e.editForm.parkingCount,callback:function(a){e.$set(e.editForm,"parkingCount",a)},expression:"editForm.parkingCount"}})],1),t("el-form-item",{attrs:{label:"包月",prop:"payMonth"}},[t("el-input",{attrs:{placeholder:"请输入金额，若为0，则说明不支持此项"},model:{value:e.editForm.payMonth,callback:function(a){e.$set(e.editForm,"payMonth",a)},expression:"editForm.payMonth"}})],1),t("el-form-item",{attrs:{label:"包季",prop:"payQuarter"}},[t("el-input",{attrs:{placeholder:"请输入金额，若为0，则说明不支持此项"},model:{value:e.editForm.payQuarter,callback:function(a){e.$set(e.editForm,"payQuarter",a)},expression:"editForm.payQuarter"}})],1),t("el-form-item",{attrs:{label:"包年",prop:"payYear"}},[t("el-input",{attrs:{placeholder:"请输入金额，若为0，则说明不支持此项"},model:{value:e.editForm.payYear,callback:function(a){e.$set(e.editForm,"payYear",a)},expression:"editForm.payYear"}})],1),t("el-form-item",{attrs:{label:"允许负车位数",prop:"allowNegativeCar"}},[t("el-input",{attrs:{placeholder:"0-9999"},model:{value:e.editForm.allowNegativeCar,callback:function(a){e.$set(e.editForm,"allowNegativeCar",a)},expression:"editForm.allowNegativeCar"}})],1),t("el-form-item",{attrs:{label:"临时车位数",prop:"temporaryParkingCount"}},[t("el-input",{attrs:{placeholder:"请输入临时车位数"},model:{value:e.editForm.temporaryParkingCount,callback:function(a){e.$set(e.editForm,"temporaryParkingCount",a)},expression:"editForm.temporaryParkingCount"}})],1),t("el-form-item",{attrs:{label:"代理商id",prop:"agentId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.editForm.agentId,callback:function(a){e.$set(e.editForm,"agentId",a)},expression:"editForm.agentId"}})],1),t("el-form-item",{attrs:{label:"车场id",prop:"parkId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.editForm.parkId,callback:function(a){e.$set(e.editForm,"parkId",a)},expression:"editForm.parkId"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.editVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"添加",visible:e.addVisible,width:"30%"},on:{"update:visible":function(a){e.addVisible=a}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.carFormRules,"label-width":"110px"}},[t("el-form-item",{attrs:{label:"区域名称",prop:"areaName"}},[t("el-input",{attrs:{placeholder:"请输入区域名称"},model:{value:e.addForm.areaName,callback:function(a){e.$set(e.addForm,"areaName",a)},expression:"addForm.areaName"}})],1),t("el-form-item",{attrs:{label:"区域编号",prop:"agentId"}},[t("el-input",{attrs:{placeholder:"请输入区域编号"},model:{value:e.addForm.areaNumber,callback:function(a){e.$set(e.addForm,"areaNumber",a)},expression:"addForm.areaNumber"}})],1),t("el-form-item",{attrs:{label:"车位数",prop:"parkingCount"}},[t("el-input",{attrs:{placeholder:"请输入车位数"},model:{value:e.addForm.parkingCount,callback:function(a){e.$set(e.addForm,"parkingCount",a)},expression:"addForm.parkingCount"}})],1),t("el-form-item",{attrs:{label:"包月",prop:"payMonth"}},[t("el-input",{attrs:{placeholder:"请输入金额，若为0，则说明不支持此项"},model:{value:e.addForm.payMonth,callback:function(a){e.$set(e.addForm,"payMonth",a)},expression:"addForm.payMonth"}})],1),t("el-form-item",{attrs:{label:"包季",prop:"payQuarter"}},[t("el-input",{attrs:{placeholder:"请输入金额，若为0，则说明不支持此项"},model:{value:e.addForm.payQuarter,callback:function(a){e.$set(e.addForm,"payQuarter",a)},expression:"addForm.payQuarter"}})],1),t("el-form-item",{attrs:{label:"包年",prop:"payYear"}},[t("el-input",{attrs:{placeholder:"请输入金额，若为0，则说明不支持此项"},model:{value:e.addForm.payYear,callback:function(a){e.$set(e.addForm,"payYear",a)},expression:"addForm.payYear"}})],1),t("el-form-item",{attrs:{label:"允许负车位数",prop:"allowNegativeCar"}},[t("el-input",{attrs:{placeholder:"0-9999"},model:{value:e.addForm.allowNegativeCar,callback:function(a){e.$set(e.addForm,"allowNegativeCar",a)},expression:"addForm.allowNegativeCar"}})],1),t("el-form-item",{attrs:{label:"临时车位数",prop:"temporaryParkingCount"}},[t("el-input",{attrs:{placeholder:"请输入临时车位数"},model:{value:e.addForm.temporaryParkingCount,callback:function(a){e.$set(e.addForm,"temporaryParkingCount",a)},expression:"addForm.temporaryParkingCount"}})],1),t("el-form-item",{attrs:{label:"代理商id",prop:"agentId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addForm.agentId,callback:function(a){e.$set(e.addForm,"agentId",a)},expression:"addForm.agentId"}})],1),t("el-form-item",{attrs:{label:"车场id",prop:"parkId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addForm.parkId,callback:function(a){e.$set(e.addForm,"parkId",a)},expression:"addForm.parkId"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.addVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveAdd}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(a){e.delVisible=a}}},[t("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.delVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)},l=[],i=(t("386d"),t("7f7f"),t("a15e"),{data:function(){return{tableData:[],cur_page:1,pagesize:20,totalRecords:0,totalPages:0,multipleSelection:[],select_cate:"",select_word:"",del_list:[],numberer:0,condition:0,is_search:!1,editVisible:!1,addVisible:!1,delVisible:!1,carFormRules:{allowNegativeCar:[{message:"不能为空",required:!0,trigger:"blur"},{min:0,max:4,message:"不能超过5个字符",trigger:"blur"},{pattern:/^[0-9]+$/,message:"只能输入数字"}],parkingCount:[{pattern:/^[0-9]+$/,message:"只能输入数字"}],temporaryParkingCount:[{pattern:/^[0-9]+$/,message:"只能输入数字"}],areaName:[{min:0,max:10,message:"长度在10个字符之内",trigger:"blur"}],areaNumber:[{min:0,max:10,message:"长度在10个字符之内",trigger:"blur"}]},carFormRulesA:{allowNegativeCar:[{message:"不能为空",required:!0,trigger:"blur"},{min:0,max:4,message:"不能超过5个字符",trigger:"blur"},{pattern:/^[0-9]+$/,message:"只能输入数字"}]},editForm:{id:"",areaName:"",areaNumber:"",parkingCount:"",temporaryParkingCount:"",payMonth:"",payQuarter:"",payYear:"",agentId:localStorage.getItem("agentId"),parkId:localStorage.getItem("parkId"),allowNegativeCar:""},addForm:{id:"",areaName:"",areaNumber:"",parkingCount:"",temporaryParkingCount:"",payMonth:"",payQuarter:"",payYear:"",agentId:localStorage.getItem("agentId"),parkId:localStorage.getItem("parkId"),allowNegativeCar:""},idx:-1,id:-1}},created:function(){this.getData()},computed:{data:function(){var e=this;return this.tableData.filter(function(a){for(var t=!1,r=0;r<e.del_list.length;r++)if(a.name===e.del_list[r].name){t=!0;break}if(!t&&a.address.indexOf(e.select_cate)>-1&&(a.name.indexOf(e.select_word)>-1||a.address.indexOf(e.select_word)>-1))return a})}},methods:{refresh:function(){this.getData(),this.editForm={},this.select_word="",this.addForm={id:"",areaName:"",areaNumber:"",parkingCount:"",temporaryParkingCount:"",agentId:localStorage.getItem("agentId"),parkId:localStorage.getItem("parkId")}},dateFormatterexpirationTime:function(e,a){var t=e.expirationTime;if(t){t=new Date(t);var r=t.getFullYear()+"-",l=t.getMonth()+1+"-",i=t.getDate();return r+l+i}return""},dateFormatter:function(e,a){var t=e.joinTime;if(t){t=new Date(t);var r=t.getFullYear()+"-",l=t.getMonth()+1+"-",i=t.getDate();return r+l+i}return""},handleSizeChange:function(e){0==this.numberer?(this.pagesize=e,this.getData(1)):(this.pagesize=e,this.search(1))},handleCurrentChange:function(e){0==this.numberer?(this.cur_page=e,this.getData()):(this.cur_page=e,this.search(2))},getData:function(e){1==e&&(this.cur_page=1),this.numberer=0;var a=this;this.$axios({url:"http://58.210.33.107:8081/carmanager-TEST/jinshiArea/selectJinshiAreaAll",method:"post",data:{pageNum:a.cur_page,pageSize:a.pagesize,parkId:localStorage.getItem("parkId")}}).then(function(e){e.status<=200&&(a.tableData=[],a.tableData=e.data.jinshiAreaData,a.totalRecords=e.data.jinshiAreaTotalRecords,console.log(e.data.jinshiAreaData),console.log(e,"123456789"))}).catch(function(e){a.$message.error("查询失败: "+e),console.log(e)})},search:function(e){this.is_search=!0,this.numberer=1,1==e&&(this.cur_page=1);var a=this;this.$axios({url:"http://58.210.33.107:8081/carmanager-TEST/jinshiArea/searchArea",method:"post",data:{keyWord:a.select_word,pageNum:a.cur_page,pageSize:a.pagesize,parkId:localStorage.getItem("parkId")}}).then(function(e){console.log(e,"852963"),e.status<=200&&(a.tableData=e.data.parkingData,a.totalRecords=e.data.parkingTotalRecords,a.tableData=e.data.jinshiAreaData)}).catch(function(e){a.$message.error("查询失败: "+e),console.log(e)})},formatter:function(e,a){return e.address},filterTag:function(e,a){return a.tag===e},handleEdit:function(e,a){this.idx=e,this.id=a.id,this.editForm={id:a.id,areaName:a.areaName,areaNumber:a.areaNumber,parkingCount:a.parkingCount,temporaryParkingCount:a.temporaryParkingCount,agentId:a.agentId,parkId:a.parkId,allowNegativeCar:String(a.allowNegativeCar)},this.editVisible=!0},handleDelete:function(e,a){this.idx=e,this.id=a.id,this.delVisible=!0},delAll:function(){var e=this.multipleSelection.length,a="";this.del_list=this.del_list.concat(this.multipleSelection);for(var t=0;t<e;t++)a+=this.multipleSelection[t].name+" ";this.$message.success("删除了"+a),this.multipleSelection=[]},handleSelectionChange:function(e){this.multipleSelection=e},saveEdit:function(){var e=this,a=this,t=this.editForm;this.$refs.editForm.validate(function(r){r?e.$axios({url:"http://58.210.33.107:8081/carmanager-TEST/jinshiArea/updateByArea",method:"post",data:t}).then(function(e){if(e.status<=200)if(a.editVisible=!1,a.$message.success("修改成功"),a.$message.success("修改第 ".concat(a.idx+1," 行成功")),a.tableData[a.idx].id===a.id)a.$set(a.tableData,a.idx,a.editForm);else for(var t=0;t<a.tableData.length;t++)if(a.tableData[t].id===a.id)return void a.$set(a.tableData,t,a.editForm)}).catch(function(e){a.$message.success("修改失败！"),console.log(e)}):a.$message.success("格式不正确")})},saveAdd:function(){var e=this,a=this,t=this.addForm;this.$refs.addForm.validate(function(r){r?e.$axios({url:"http://58.210.33.107:8081/carmanager-TEST/jinshiArea/insertJinshiArea",method:"post",data:t}).then(function(e){e.status<=200&&(5==e.data?a.$message.error("已存在"):(a.addVisible=!1,a.$message.success("添加成功"),a.getData(),a.addForm=""))}).catch(function(e){a.$message.error("添加失败！"),console.log(e)}):a.$message.success("格式不正确")})},deleteRow:function(){var e=this;console.log(e.id),this.$axios({url:"http://58.210.33.107:8081/carmanager-TEST/jinshiArea/deleteByPrimaryKey",method:"post",data:{id:e.id}}).then(function(a){if(a.status<=200)if(e.$message.success("删除成功"),e.delVisible=!1,e.tableData[e.idx].id===e.id)e.tableData.splice(e.idx,1);else for(var t=0;t<e.tableData.length;t++)if(e.tableData[t].id===e.id)return void e.tableData.splice(t,1)}).catch(function(a){console.log(e.id),e.$message.success("查询失败！"),console.log(a)})}}}),o=i,n=(t("241e3"),t("2877")),s=Object(n["a"])(o,r,l,!1,null,"4a93577a",null);a["default"]=s.exports},dfe5:function(e,a,t){}}]);