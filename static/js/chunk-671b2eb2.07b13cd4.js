(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-671b2eb2"],{3443:function(e,a,t){"use strict";var o=t("ebb5"),n=t.n(o);n.a},"4f12":function(e,a,t){},"6cab":function(e,a,t){"use strict";var o=t("4f12"),n=t.n(o);n.a},"90e9":function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"carManager"},[t("div",{staticClass:"crumbs"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[t("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 优惠券管理\n      ")])],1)],1),t("div",{staticClass:"container"},[t("div",{staticClass:"handle-box"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(a){e.addVisible=!0}}},[e._v("添加")]),t("el-button",{staticClass:"sousuo",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.refresh}},[e._v("刷新")])],1),t("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"50",align:"center","class-name":"table"}}),t("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号","class-name":"table"}}),t("el-table-column",{attrs:{label:"操作",width:"180",align:"center","class-name":"table"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(a.$index,a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleadd(a.$index,a.row)}}},[e._v("充值")]),t("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除")])]}}])}),t("el-table-column",{attrs:{prop:"names",label:"优惠券类型","class-name":"table"}}),t("el-table-column",{attrs:{prop:"couponName",label:"优惠券名称","class-name":"table"}}),t("el-table-column",{attrs:{prop:"couponStarttime",label:"开始时间","class-name":"table"}}),t("el-table-column",{attrs:{prop:"couponEndtime",label:"结束时间","class-name":"table"}}),t("el-table-column",{attrs:{prop:"couponParkingName",label:"停车场","class-name":"table"}}),t("el-table-column",{attrs:{prop:"couponBcName",label:"商户","class-name":"table"}}),t("el-table-column",{attrs:{prop:"couponAreaName",label:"区域","class-name":"table"}}),t("el-table-column",{attrs:{prop:"couponCount",label:"优惠券总数量","class-name":"table"}}),t("el-table-column",{attrs:{prop:"couponDataA",label:"优惠券剩余数量","class-name":"table"}}),t("el-table-column",{attrs:{prop:"jcgReliefAlltime",label:"减免总时长","class-name":"table"}}),t("el-table-column",{attrs:{prop:"jcgReliefRemaintime",label:"减免剩余时长","class-name":"table"}}),t("el-table-column",{attrs:{prop:"jcgReliefAllmoney",label:"减免总金额","class-name":"table"}}),t("el-table-column",{attrs:{prop:"jcgReliefRemainmoney",label:"减免剩余金额","class-name":"table"}}),t("el-table-column",{attrs:{prop:"couponDataB",label:"备注","class-name":"table"}})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","current-page":e.cur_page,"page-size":e.pagesize,total:e.totalRecords,"page-sizes":[5,10,20,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"充值",visible:e.addnewVisible,width:"30%"},on:{"update:visible":function(a){e.addnewVisible=a}}},[t("el-form",{ref:"addnewForm",attrs:{model:e.addnewForm,rules:e.carFormRulese,"label-width":"100px"}},[t("el-form-item",{attrs:{label:e.typenames,prop:"couponCount"}},[t("el-input",{model:{value:e.addnewForm.couponCount,callback:function(a){e.$set(e.addnewForm,"couponCount",a)},expression:"addnewForm.couponCount"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.addnewVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addSure}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"添加",visible:e.addVisible,width:"30%"},on:{"update:visible":function(a){e.addVisible=a}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.carFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"优惠券名称",prop:"couponName "}},[t("el-input",{attrs:{placeholder:"请输入优惠券名称"},model:{value:e.addForm.couponName,callback:function(a){e.$set(e.addForm,"couponName",a)},expression:"addForm.couponName "}})],1),t("el-form-item",{attrs:{label:"优惠券类型",prop:"couponCount"}},[t("el-select",{on:{change:function(a){return e.chooseCoupon()}},model:{value:e.addForm.jcgType,callback:function(a){e.$set(e.addForm,"jcgType",a)},expression:"addForm.jcgType"}},e._l(e.couponType,function(e){return t("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}),1)],1),t("el-form-item",{attrs:{label:"优惠券数量",prop:"couponCount"}},[t("el-input",{attrs:{placeholder:"请先选择优惠券类型，输入需要生成的优惠券数量",disabled:e.flagNum},model:{value:e.addForm.couponCount,callback:function(a){e.$set(e.addForm,"couponCount",a)},expression:"addForm.couponCount"}})],1),t("el-form-item",{attrs:{label:"减免时长",prop:"time"}},[t("el-input",{attrs:{placeholder:"减免时长（小时）",disabled:e.flagTime},model:{value:e.addForm.jcgReliefTime,callback:function(a){e.$set(e.addForm,"jcgReliefTime",a)},expression:"addForm.jcgReliefTime"}})],1),t("el-form-item",{attrs:{label:"减免金额",prop:"money"}},[t("el-input",{attrs:{placeholder:"减免金额（元）",disabled:e.flagMoney},model:{value:e.addForm.jcgReliefMoney,callback:function(a){e.$set(e.addForm,"jcgReliefMoney",a)},expression:"addForm.jcgReliefMoney"}})],1),t("el-form-item",{attrs:{label:"开始日期",prop:"couponStarttime"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.addForm.couponStarttime,callback:function(a){e.$set(e.addForm,"couponStarttime",a)},expression:"addForm.couponStarttime"}})],1),t("el-form-item",{attrs:{label:"结束日期",prop:"couponEndtime"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.addForm.couponEndtime,callback:function(a){e.$set(e.addForm,"couponEndtime",a)},expression:"addForm.couponEndtime"}})],1),t("el-form-item",{attrs:{label:"停车场",prop:"couponParkingName"}},[t("el-select",{attrs:{placeholder:"停车场",disabled:""},model:{value:e.addForm.couponParkingName,callback:function(a){e.$set(e.addForm,"couponParkingName",a)},expression:"addForm.couponParkingName"}},e._l(e.parking,function(e){return t("el-option",{key:e.couponParkingName,attrs:{label:e.couponParkingName,value:e.couponParkingName}})}),1)],1),t("el-form-item",{attrs:{label:"区域",prop:"couponAreaName"}},[t("el-select",{attrs:{placeholder:"区域"},on:{change:e.hand},model:{value:e.addForm.couponAreaName,callback:function(a){e.$set(e.addForm,"couponAreaName",a)},expression:"addForm.couponAreaName"}},e._l(e.area,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),t("el-form-item",{attrs:{label:"商户",prop:"couponBcName"}},[t("el-select",{attrs:{placeholder:"商户"},model:{value:e.addForm.couponBcName,callback:function(a){e.$set(e.addForm,"couponBcName",a)},expression:"addForm.couponBcName"}},e._l(e.bc,function(e){return t("el-option",{key:e.couponBcName,attrs:{label:e.couponBcName,value:e.couponBcName}})}),1)],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.addForm.couponDataB,callback:function(a){e.$set(e.addForm,"couponDataB",a)},expression:"addForm.couponDataB"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.addVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveAdd}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改用户权限",visible:e.editVisible,width:"30%"},on:{"update:visible":function(a){e.editVisible=a}}},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.carFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"优惠券名称",prop:"couponName"}},[t("el-input",{attrs:{disabled:"",placeholder:"请输入优惠券名称"},model:{value:e.editForm.couponName,callback:function(a){e.$set(e.editForm,"couponName",a)},expression:"editForm.couponName"}})],1),t("el-form-item",{attrs:{label:"全免券数量",prop:"couponCount"}},[t("el-input",{attrs:{disabled:"",placeholder:"请输入全免券数量"},model:{value:e.editForm.couponDataA,callback:function(a){e.$set(e.editForm,"couponDataA",a)},expression:"editForm.couponDataA "}})],1),t("el-form-item",{attrs:{label:"开始日期",prop:"couponStarttime"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.editForm.couponStarttime,callback:function(a){e.$set(e.editForm,"couponStarttime",a)},expression:"editForm.couponStarttime"}})],1),t("el-form-item",{attrs:{label:"结束日期",prop:"couponEndtime"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.editForm.couponEndtime,callback:function(a){e.$set(e.editForm,"couponEndtime",a)},expression:"editForm.couponEndtime"}})],1),t("el-form-item",{attrs:{label:"停车场",prop:"couponParkingName"}},[t("el-select",{attrs:{placeholder:"停车场",disabled:""},model:{value:e.editForm.couponParkingName,callback:function(a){e.$set(e.editForm,"couponParkingName",a)},expression:"editForm.couponParkingName"}},e._l(e.parking,function(e){return t("el-option",{key:e.couponParkingName,attrs:{label:e.couponParkingName,value:e.couponParkingName}})}),1)],1),t("el-form-item",{attrs:{label:"区域",prop:"couponAreaName"}},[t("el-select",{attrs:{disabled:"",placeholder:"区域"},model:{value:e.editForm.couponAreaName,callback:function(a){e.$set(e.editForm,"couponAreaName",a)},expression:"editForm.couponAreaName"}},e._l(e.area,function(e){return t("el-option",{key:e.couponAreaName,attrs:{label:e.couponAreaName,value:e.couponAreaName}})}),1)],1),t("el-form-item",{attrs:{label:"商户",prop:"couponBcName"}},[t("el-select",{attrs:{placeholder:"商户",disabled:""},model:{value:e.editForm.couponBcName,callback:function(a){e.$set(e.editForm,"couponBcName",a)},expression:"editForm.couponBcName"}},e._l(e.bc,function(e){return t("el-option",{key:e.couponBcName,attrs:{label:e.couponBcName,value:e.couponBcName}})}),1)],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.editForm.couponDataB,callback:function(a){e.$set(e.editForm,"couponDataB",a)},expression:"editForm.couponDataB"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.editVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(a){e.delVisible=a}}},[t("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.delVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)},n=[],l=(t("c5f6"),t("7f7f"),t("a15e"),{name:"carManager",data:function(){return{bc:[],agent:[],area:[],parking:[],tableData:[],cur_page:1,pagesize:20,totalRecords:0,totalPages:0,multipleSelection:[],select_cate:"",select_word:"",del_list:[],typenames:"",is_search:!1,addnewVisible:!1,editVisible:!1,addVisible:!1,delVisible:!1,addForm:{couponId:"",couponName:"",couponType:"",couponCount:"",couponStarttime:"",couponEndtime:"",couponBcName:"",jcgType:"",jcgReliefTime:"",jcgReliefMoney:"",couponParkingName:"",couponAreaName:"",couponDataB:"",jcgReliefAlltime:"",jcgReliefRemaintime:"",jcgReliefAllmoney:"",jcgReliefRemainmoney:""},editForm:{couponId:"",couponName:"",couponType:"",couponCount:"",couponStarttime:"",couponEndtime:"",couponBcName:"",couponParkingName:"",couponAreaName:"",couponDataA:"",couponDataB:"",jcgReliefAlltime:"",jcgReliefRemaintime:"",jcgReliefAllmoney:"",jcgReliefRemainmoney:""},addnewForm:{couponId:"",couponCount:""},carFormRules:{couponCount:[{pattern:/^[0-9]+$/,message:"只能输入数字"}]},carFormRulese:{},options:[],value:"",idx:-1,id:-1,flagTime:!0,flagMoney:!0,flagNum:!0,couponType:[{id:0,value:"全免券"},{id:1,value:"减免时长"},{id:2,value:"减免金额"},{id:3,value:"当天有效全免券"}]}},created:function(){this.getData(),this.getAgent(),this.getArea(),this.getParking();var e=new Date;this.addForm.couponStarttime=e,this.addForm.couponEndtime=e},computed:{data:function(){var e=this;return this.tableData.filter(function(a){for(var t=!1,o=0;o<e.del_list.length;o++)if(a.name===e.del_list[o].name){t=!0;break}if(!t&&a.address.indexOf(e.select_cate)>-1&&(a.name.indexOf(e.select_word)>-1||a.address.indexOf(e.select_word)>-1))return a})}},methods:{chooseCoupon:function(){"减免时长"==this.addForm.jcgType?(this.flagTime=!1,this.flagMoney=!0,this.flagNum=!0):"减免金额"==this.addForm.jcgType?(this.flagMoney=!1,this.flagTime=!0,this.flagNum=!0):(this.flagTime=!0,this.flagMoney=!0,this.flagNum=!1)},refresh:function(){this.getData(),this.getAgent(),this.getArea(),this.getParking(),this.editForm={},this.select_word="",this.addForm={}},timestampToTime:function(e){var a=new Date(e),t=a.getFullYear()+"-",o=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",n=a.getDate()+" ";a.getHours(),a.getMinutes(),a.getSeconds();return t+o+n},hand:function(e){var a=this;this.$axios({url:"JinshiBusinessAccount/selectAllBusinessName",method:"post",data:{areaId:Number(e),parkId:String(localStorage.getItem("parkId"))}}).then(function(e){console.log(e),a.bc=[];for(var t=0;t<e.data.BusinessNameData.length;t++)a.bc.push({couponBcName:e.data.BusinessNameData[t].bcName})}).catch(function(e){a.$message.error("查询失败: "+e)})},dateChangebirthdayC:function(e){console.log(e),this.addForm.couponStarttime=e,this.editForm.couponStarttime=e},dateChangebirthdayD:function(e){console.log(e),this.editForm.couponEndtime=e},dateFormatterexpirationTime:function(e,a){var t=e.expirationTime;if(t){t=new Date(t);var o=t.getFullYear()+"-",n=t.getMonth()+1+"-",l=t.getDate();return o+n+l}return""},dateFormatter:function(e,a){var t=e.joinTime;if(t){t=new Date(t);var o=t.getFullYear()+"-",n=t.getMonth()+1+"-",l=t.getDate();return o+n+l}return""},handleSizeChange:function(e){this.pagesize=e,this.getData()},handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this;this.$axios({url:"JinshiCoupon/selectCouponAll",method:"post",data:{pageNum:e.cur_page,pageSize:e.pagesize,parkId:String(localStorage.getItem("parkId"))}}).then(function(a){if(console.log(a,"1111111111111111111"),a.status<=200){console.log(a.data.CouponData);for(var t=0;t<a.data.CouponData.length;t++)a.data.CouponData[t]["names"]="";for(var o=0;o<a.data.CouponData.length;o++)0==a.data.CouponData[o].couponType?a.data.CouponData[o].names="全免劵":1==a.data.CouponData[o].couponType?a.data.CouponData[o].names="减免时长":2==a.data.CouponData[o].couponType?a.data.CouponData[o].names="减免金额":3==a.data.CouponData[o].couponType&&(a.data.CouponData[o].names="当天有效全免劵");for(var n=0;n<a.data.CouponData.length;n++)a.data.CouponData[n].couponEndtime&&(a.data.CouponData[n].couponEndtime=e.timestampToTime(a.data.CouponData[n].couponEndtime)),a.data.CouponData[n].couponStarttime&&(a.data.CouponData[n].couponStarttime=e.timestampToTime(a.data.CouponData[n].couponStarttime)),e.tableData=a.data.CouponData,e.totalRecords=a.data.CouponRecords}}).catch(function(a){e.$message.error("查询失败: "+a),console.log(a)})},getAgent:function(){this.agent.length=0;var e=this;this.$axios({url:"parkingJinshi/selectAllAgent",method:"post",data:{}}).then(function(a){e.agent=[];for(var t=0;t<a.data.agentNameData.length;t++)e.agent.push({couponAgentName:a.data.agentNameData[t].username})}).catch(function(a){e.$message.error("查询失败: "+a)})},getArea:function(){this.area.length=0;var e=this;this.$axios({url:"jinshiArea/selectAreaNameAll?parkId="+localStorage.getItem("parkId"),method:"get",data:{}}).then(function(a){e.area=[];for(var t=0;t<a.data.areaNameData.length;t++)e.area.push({value:a.data.areaNameData[t].id,label:a.data.areaNameData[t].areaName});console.log(e.area)}).catch(function(a){e.$message.error("查询失败: "+a)})},getParking:function(){this.parking.length=0;var e=this;this.$axios({url:"parkingJinshi/selectAllParkingName",method:"post",data:{}}).then(function(a){e.parking=[];for(var t=0;t<a.data.parkingNameData.length;t++)e.parking.push({couponParkingName:a.data.parkingNameData[t].jpName}),e.addForm.couponParkingName=a.data.parkingNameData[t].jpName}).catch(function(a){e.$message.error("查询失败: "+a)})},formatter:function(e,a){return e.address},filterTag:function(e,a){return a.tag===e},handleadd:function(e,a){this.idx=e,this.id=a.couponId,console.log("====",a.couponType),0==a.couponType?this.typenames="请输入需要充值全免劵的数量":1==a.couponType?this.typenames="请输入需要充值减免时长的时间":2==a.couponType?this.typenames="请输入需要充值减免金额的金额":3==a.couponType&&(this.typenames="请输入需要充值当天全免劵的数量");var t=a.couponId,o=Number(a.couponType);console.log(o),console.log(a.couponId),this.addnewForm={jcgType:o,couponId:t,couponCount:"",jcgReliefAlltime:"",jcgReliefAllmoney:""},this.addnewVisible=!0},handleEdit:function(e,a){this.idx=e,this.id=a.couponId,console.log(a),this.editForm={couponId:a.couponId,couponName:a.couponName,couponType:a.couponType,couponCount:a.couponCount,couponStarttime:a.couponStarttime,couponEndtime:a.couponEndtime,couponBcName:a.couponBcName,couponAgentName:a.couponAgentName,couponParkingName:a.couponParkingName,couponAreaName:a.couponAreaName,couponDataA:a.couponDataA,jcgReliefAlltime:a.jcgReliefAlltime,jcgReliefRemaintime:a.jcgReliefRemaintime,jcgReliefAllmoney:a.jcgReliefAllmoney,jcgReliefRemainmoney:a.jcgReliefRemainmoney},this.editVisible=!0},addSure:function(){var e=this;console.log(this.typenames),"请输入需要充值减免时长的时间"==this.typenames?(this.addnewForm.jcgReliefAlltime=this.addnewForm.couponCount,this.addnewForm.couponCount="",this.addnewForm.jcgReliefAllmoney=""):"请输入需要充值减免金额的金额"==this.typenames?(this.addnewForm.jcgReliefAllmoney=this.addnewForm.couponCount,this.addnewForm.jcgReliefAlltime="",this.addnewForm.couponCount=""):(this.addnewForm.couponCount=this.addnewForm.couponCount,this.addnewForm.jcgReliefAllmoney="",this.addnewForm.jcgReliefAlltime="");var a=this,t=this.addnewForm;console.log(t),this.$refs.addnewForm.validate(function(o){o?e.$axios({url:"JinshiCoupon/updateCouponCount",method:"post",data:t}).then(function(e){if(e.status<=200){if(a.addnewVisible=!1,a.$message.success("充值成功"),a.tableData[a.idx].id===a.id)a.$set(a.tableData,a.idx,a.addnewForm);else for(var t=0;t<a.tableData.length;t++)if(a.tableData[t].id===a.id)return void a.$set(a.tableData,t,a.addnewForm);a.getData()}}).catch(function(e){a.$message.error("充值失败！"),console.log(e)}):a.$message.success("格式不正确")})},saveEdit:function(){var e=this,a=this,t=this.editForm;console.log(this.editForm),this.$refs.editForm.validate(function(o){o?e.$axios({url:"JinshiCoupon/updateByPrimaryKey",method:"post",data:t}).then(function(e){if(e.status<=200){if(a.editVisible=!1,a.$message.success("修改成功"),a.$message.success("修改第 ".concat(a.idx+1," 行成功")),a.tableData[a.idx].id===a.id)a.$set(a.tableData,a.idx,a.editForm);else for(var t=0;t<a.tableData.length;t++)if(a.tableData[t].id===a.id)return void a.$set(a.tableData,t,a.editForm);a.getData()}}).catch(function(e){a.$message.success("修改失败！"),console.log(e)}):a.$message.success("格式不正确")})},handleDelete:function(e,a){this.idx=e,this.id=a.couponId,console.log(this.id),this.delVisible=!0},delAll:function(){var e=this.multipleSelection.length,a="";this.del_list=this.del_list.concat(this.multipleSelection);for(var t=0;t<e;t++)a+=this.multipleSelection[t].name+" ";this.$message.success("删除了"+a),this.multipleSelection=[]},handleSelectionChange:function(e){this.multipleSelection=e},saveAdd:function(){var e=this;switch(this.addForm.jcgType){case"全免券":this.addForm.jcgType=0;break;case"减免时长":this.addForm.jcgType=1;break;case"减免金额":this.addForm.jcgType=2;break;case"当天有效全免券":this.addForm.jcgType=3;break}if(console.log(this.addForm.passWord,this.addForm.passwordsure),1==this.addForm.jcgType?(this.addForm.jcgReliefAlltime=Number(this.addForm.jcgReliefTime),this.addForm.jcgReliefAllmoney="",this.addForm.couponCount="",console.log(this.addForm.jcgReliefAlltime,"aaaa")):2==this.addForm.jcgType?(this.addForm.jcgReliefAllmoney=Number(this.addForm.jcgReliefMoney),this.addForm.jcgReliefAlltime="",this.addForm.couponCount=""):3==this.addForm.jcgType?(this.addForm.jcgReliefAllmoney="",this.addForm.jcgReliefAlltime=""):0==this.addForm.jcgType&&(this.addForm.jcgReliefAllmoney="",this.addForm.jcgReliefAlltime=""),this.addForm.passWord==this.addForm.passwordsure){var a=this;a.addForm.rolename=a.value,a.addForm.couponAgentName=localStorage.getItem("agentId");for(var t=0;t<this.area.length;t++)this.area[t].value==this.addForm.couponAreaName&&(this.addForm.couponAreaName=this.area[t].label);var o=this.addForm;console.log(o,"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"),this.$refs.addForm.validate(function(t){t?e.$axios({url:"JinshiCoupon/insert",method:"post",data:o}).then(function(e){e.status<=200&&(1==e.data.code?a.$message.error("用户名已存在"):(a.addVisible=!1,a.$message.success("添加成功"),a.getData()))}).catch(function(e){a.$message.error("添加失败！"),console.log(e)}):a.$message.success("格式不正确")})}else alert("两次密码不一致")},deleteRow:function(){var e=this;this.$axios({url:"JinshiCoupon/deleteByPrimaryKey?id="+e.id,method:"post",data:{id:e.id}}).then(function(a){if(a.status<=200)if(e.$message.success("删除成功"),e.getData(),e.delVisible=!1,e.tableData[e.idx].id===e.id)e.tableData.splice(e.idx,1);else for(var t=0;t<e.tableData.length;t++)if(e.tableData[t].id===e.id)return void e.tableData.splice(t,1)}).catch(function(a){e.$message.success("删除失败！"),console.log(a)})}}}),i=l,r=(t("3443"),t("6cab"),t("2877")),s=Object(r["a"])(i,o,n,!1,null,"4875fe68",null);a["default"]=s.exports},ebb5:function(e,a,t){}}]);